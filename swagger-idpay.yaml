openapi: 3.0.3
info:
  title: IDPAY ITN IO API
  version: '1.0'
  contact:
    name: PagoPA S.p.A.
    email: cstar@pagopa.it
  description: |-
    IDPAY ITN IBAN IO

    IDPAY ITN Onboarding Workflow IO

    IDPAY ITN Timeline IO

    IDPAY ITN Wallet IO

    IDPAY ITN Payment QRCODE IO

    IDPAY ITN Payment IO
servers:
  - description: Development Test
    url: 'https://api-io.dev.cstar.pagopa.it/idpay-itn/wallet'
    x-internal: true
  - description: User Acceptance Test
    url: 'https://api-io.uat.cstar.pagopa.it/idpay-itn/wallet'
    x-internal: true
security:
  - bearerAuth: []
tags:
  - name: iban
    description: ''
  - name: onboarding
    description: ''
  - name: timeline
    description: ''
  - name: wallet
    description: ''
  - name: payment
    description: ''
paths:
  '/iban/{iban}':
    get:
      tags:
        - iban
      summary: >-
        ENG: Returns the details of the IBAN associated to the initiative by the
        citizen - IT: Ritorna i dettagli di un IBAN associato ad una iniziativa
      description: >-
        Returns the details of the IBAN associated to the initiative by the
        citizen
      operationId: getIban
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          in: header
          description: 'ENG: Language - IT: Lingua'
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: iban
          in: path
          description: 'ENG: The citizen IBAN - IT: IBAN del cittadino'
          required: true
          schema:
            type: string
            pattern: '^IT[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}$'
            minLength: 27
            maxLength: 27
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanErrorDTO'
              example:
                code: IBAN_INVALID_REQUEST
                message: Invalid request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanErrorDTO'
              example:
                code: IBAN_NOT_FOUND
                message: Iban not found
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanErrorDTO'
              example:
                code: IBAN_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanErrorDTO'
              example:
                code: IBAN_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  /iban/:
    get:
      tags:
        - iban
      summary: >-
        ENG: Returns the list of IBAN associated to the citizen - IT: Ritorna la
        lista di IBAN associati ad un cittadino
      description: Returns the list of IBAN associated to the citizen
      operationId: getIbanList
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          in: header
          description: 'ENG: Language - IT: Lingua'
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanListDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanErrorDTO'
              example:
                code: IBAN_INVALID_REQUEST
                message: Invalid request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanErrorDTO'
              example:
                code: IBAN_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanErrorDTO'
              example:
                code: IBAN_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/onboarding/service/{serviceId}':
    get:
      tags:
        - onboarding
      summary: >-
        ENG: Retrieves the initiative ID starting from the corresponding service
        ID - IT: Ritrova l'identificativo dell'iniziativa a partire
        dall'idetificativo del service
      description: Retrieves the initiative ID starting from the corresponding service ID
      operationId: getInitiativeData
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: serviceId
          in: path
          description: 'ENG: The service ID - IT: Identificativo del service'
          required: true
          schema:
            type: string
            maxLength: 50
            pattern: '^[a-zA-Z0-9]+$'
        - name: Accept-Language
          in: header
          description: 'ENG: Language - IT: Lingua'
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
      responses:
        '200':
          description: Get successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeDataDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: INITIATIVE_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested initiative was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: INITIATIVE_NOT_FOUND
                message: Initiative not found
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: INITIATIVE_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: INITIATIVE_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/onboarding/{initiativeId}/detail':
    get:
      tags:
        - onboarding
      summary: >-
        ENG: Returns the detail of an active initiative - IT: Ritorna i dettagli
        di un'iniziativa attiva
      description: Returns the detail of an active initiative
      operationId: webInitiativeDetail
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          in: header
          description: 'ENG: Language - IT: Lingua'
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: The initiative ID
          required: true
          schema:
            type: string
            description: >-
              ENG: Unique identifier of the subscribed initiative - IT:
              Identificativo univoco dell'iniziativa sottoscritta
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested inititative was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_INITIATIVE_NOT_FOUND
                message: Initiative not found
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  /onboarding/:
    put:
      tags:
        - onboarding
      summary: >-
        ENG: Saving mail and self-declarations - IT: Salvataggio della mail e
        delle autodichiarazioni
      description: Saving mail and self-declarations
      operationId: saveOnboarding
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          in: header
          description: 'ENG: Language - IT: Lingua'
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
      requestBody:
        description: >-
          ENG: Unique identifier of the subscribed initiative, flag for PDND
          acceptation and the list of accepted self-declared criteria - IT:
          Identificativo univoco dell'iniziativa sottoscritta, elenco dei
          criteri autodichiarati accettati,
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OnboardingDTO'
      responses:
        '202':
          description: Accepted - Request Taken Over
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '403':
          description: This onboarding is forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_BUDGET_EXHAUSTED
                message: Budget exhausted for initiative XXXXX
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_INITIATIVE_NOT_FOUND
                message: Cannot find initiative XXXXX
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_GENERIC_ERROR
                message: An error occurred in the microservice admissibility
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/onboarding/{initiativeId}/status':
    get:
      tags:
        - onboarding
      summary: >-
        ENG: Returns the actual onboarding status along with the date on which
        that status changed and, if present, the date upon which the onboarding
        successfully went through - IT: Ritorna lo stato attuale dell'adesione
        insieme alla data in cui quello stato è cambiato e, se presente, la data
        in cui l'adesione è avvenuta con successo
      description: >-
        Returns the actual onboarding status along with the date on which that
        status changed and, if present, the date upon which the onboarding
        successfully went through
      operationId: onboardingStatus
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          in: header
          description: 'ENG: Language - IT: Lingua'
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Check successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingStatusDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_USER_NOT_ONBOARDED
                message: The current user is not onboarded on initiative XXXXX
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_GENERIC_ERROR
                message: An error occurred in the microservice admissibility
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  /onboarding/user/initiative/status:
    get:
      tags:
        - onboarding
      summary: >-
        ENG: Returns all initiatives in Waiting List or In Evaluation status
        that the user is onboarded to or has requested - IT: Ritorna tutte le
        iniziative in stato Lista Attesa o In Valutazione a cui l'utente è
        onboardato o che ha fatto richiesta
      description: >-
        Returns all initiatives in Waiting List or In Evaluation status that the
        user is onboarded to or has requested
      operationId: onboardingInitiativeUserStatus
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          in: header
          description: 'ENG: Language - IT: Lingua'
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
      responses:
        '200':
          description: Check successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListUsersOnboardingStatusDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: ONBOARDING_GENERIC_ERROR
                message: An error occurred in the microservice admissibility
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/timeline/{initiativeId}':
    get:
      tags:
        - timeline
      summary: >-
        ENG: Returns the list of transactions and operations of an initiative of
        a citizen sorted by date (newest->oldest) - IT: Ritorna la lista
        ordinata di transazioni e operazioni di una iniziativa di un cittadino
        (nuove->vecchie)
      description: >-
        Returns the list of transactions and operations of an initiative of a
        citizen sorted by date (newest->oldest)
      operationId: getTimeline
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          in: header
          description: 'ENG: Language - IT: Lingua'
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
        - name: operationType
          in: query
          description: 'ENG: Operation type filter - IT: Filtro tipologia dell''operazione'
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
        - name: page
          in: query
          description: 'ENG: The number of the page - IT: Numero della pagina'
          schema:
            type: integer
            format: int32
            minimum: 1
            maximum: 240
        - name: size
          in: query
          description: >-
            ENG: Number of items, default 3 - max 10 - IT: Numero di elementi,
            default 3 - max 10
          schema:
            type: integer
            format: int32
            minimum: 3
            maximum: 10
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: TIMELINE_INVALID_REQUEST
                message: Something went wrong handling request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: TIMELINE_USER_NOT_FOUND
                message: Timeline for the current user not found
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: TIMELINE_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: TIMELINE_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/timeline/{initiativeId}/{operationId}':
    get:
      tags:
        - timeline
      summary: >-
        ENG: Returns the detail of a transaction - IT: Ritorna il dettaglio di
        una transazione
      description: Returns the detail of a transaction
      operationId: getTimelineDetail
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          in: path
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
        - name: operationId
          description: 'ENG: The operation ID - IT: Identificativo dell''operazione'
          in: path
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OperationDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: TIMELINE_INVALID_REQUEST
                message: Something went wrong handling request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: TIMELINE_DETAIL_NOT_FOUND
                message: Detail of Timeline not found
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: TIMELINE_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: TIMELINE_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  /wallet/:
    get:
      tags:
        - wallet
      summary: >-
        ENG: Returns the list of active initiatives of a citizen - IT: Ritorna
        la lista di iniziative attive di un cittadino
      description: Returns the list of active initiatives of a citizen
      operationId: getWallet
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/wallet/{initiativeId}/detail':
    get:
      tags:
        - wallet
      summary: >-
        ENG: Returns the detail of an initiative - IT: Ritorna i dettagli
        dell'iniziativa
      description: Returns the detail of an initiative
      operationId: getInitiativeBeneficiaryDetail
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeDetailDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested inititative was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: INITIATIVE_NOT_FOUND
                message: Initiative not found
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: INITIATIVE_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: INITIATIVE_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/wallet/{initiativeId}':
    get:
      tags:
        - wallet
      summary: >-
        ENG: Returns the detail of an active initiative of a citizen - IT:
        Ritorna i dettagli di una iniziativa di un cittadino
      description: Returns the detail of an active initiative of a citizen
      operationId: getWalletDetail
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeDTO1'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_USER_NOT_ONBOARDED
                message: User not onboarded on this initiative
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/wallet/{initiativeId}/iban':
    put:
      tags:
        - wallet
      summary: >-
        ENG: Association of an IBAN to an initiative - IT: Associa un IBAN ad
        un'iniziativa
      description: Association of an IBAN to an initiative
      operationId: enrollIban
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      requestBody:
        description: >-
          ENG: Unique identifier of the subscribed initiative, IBAN of the
          citizen - IT: Identificativo dell'iniziativa sottoscritta, IBAN del
          cittadino
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IbanPutDTO'
      responses:
        '200':
          description: Enrollment OK
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_ENROLL_IBAN_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE
                message: >-
                  It is not possible enroll an iban for a discount type
                  initiative
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/wallet/{initiativeId}/instruments/by-wallet/{idWallet}':
    put:
      tags:
        - wallet
      summary: >-
        ENG: Association of a payment instrument to an initiative - IT: Associa
        uno strumento di pagamento ad un'iniziativa
      description: Association of a payment instrument to an initiative
      operationId: enrollInstrument
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
        - name: idWallet
          in: path
          description: >-
            ENG: A unique id that identifies a payment method - IT:
            Identificativo univoco del metodo di pagamento
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Enrollment OK
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INSTRUMENT_ALREADY_ASSOCIATED
                message: Payment Instrument is already associated to another user
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INSTRUMENT_NOT_FOUND
                message: >-
                  The selected payment instrument has not been found for the
                  current user
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_GENERIC_ERROR
                message: An error occurred in the microservice payment instrument
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/wallet/{initiativeId}/instruments':
    get:
      tags:
        - wallet
      summary: >-
        ENG: Returns the list of payment instruments associated to the
        initiative by the citizen - IT: Ritorna la lista di istrumenti di
        pagamenti associati ad un'iniziativa del cittadino
      description: >-
        Returns the list of payment instruments associated to the initiative by
        the citizen
      operationId: getInstrumentList
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          in: header
          description: 'ENG: Language - IT: Lingua'
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InstrumentListDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: PAYMENT_INSTRUMENT_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: PAYMENT_INSTRUMENT_GENERIC_ERROR
                message: Something gone wrong while send RTD instrument notify
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/wallet/{initiativeId}/instruments/{instrumentId}':
    delete:
      tags:
        - wallet
      summary: >-
        ENG: Delete a payment instrument from an initiative - IT: Cancella uno
        strumento di pagamento di un'iniziativa
      description: Delete a payment instrument from an initiative
      operationId: deleteInstrument
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificatico dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
        - name: instrumentId
          in: path
          description: >-
            ENG: A unique id, internally detached, which identifies a payment
            method - IT: Identificativo univoco, che identifica il metodo di
            pagamento
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Delete OK
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INSTRUMENT_DELETE_NOT_ALLOWED
                message: >-
                  It's not possible to delete an instrument of AppIO payment
                  types
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INSTRUMENT_NOT_FOUND
                message: >-
                  The selected payment instrument has not been found for the
                  current user
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_GENERIC_ERROR
                message: An error occurred in the microservice payment instrument
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/wallet/{initiativeId}/unsubscribe':
    delete:
      tags:
        - wallet
      summary: 'ENG: Unsubscribe to an initiative - IT: Disiscrizione ad un''iniziativa'
      description: Unsubscribe to an initiative
      operationId: unsubscribe
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '204':
          description: Unsubscribe OK
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_USER_NOT_ONBOARDED
                message: User not onboarded on this initiative
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_GENERIC_ERROR
                message: An error occurred in the microservice onboarding
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/wallet/{initiativeId}/status':
    get:
      tags:
        - wallet
      summary: >-
        ENG: Returns the actual wallet status - IT: Ritorna lo status attuale
        del wallet
      description: Returns the actual wallet status
      operationId: getWalletStatus
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Check successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletStatusDTO'
              example:
                status: NOT_REFUNDABLE_ONLY_IBAN
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_USER_NOT_ONBOARDED
                message: User not onboarded on this initiative
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_GENERIC_ERROR
                message: Application error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/wallet/instrument/{idWallet}/initiatives':
    get:
      tags:
        - wallet
      summary: >-
        ENG: Returns the initiatives list associated to a payment instrument -
        IT: Ritorna la lista di iniziative associate ad uno strumento di
        pagamento
      description: Returns the initiatives list associated to a payment instrument
      operationId: getInitiativesWithInstrument
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: idWallet
          in: path
          description: 'ENG: The ID Wallet - IT: Identificativo wallet'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativesWithInstrumentDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INSTRUMENT_NOT_FOUND
                message: >-
                  The selected payment instrument has not been found for the
                  current user
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_GENERIC_ERROR
                message: An error occurred in the microservice payment instrument
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  /wallet/code/status:
    get:
      tags:
        - wallet
      summary: >-
        ENG: Check if the idpay code already exists - IT: Verifica se è già
        stato generato il codice idpay
      description: Check if the idpay code already exists
      operationId: getIdpayCodeStatus
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
      responses:
        '200':
          description: Check successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckEnrollmentDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: PAYMENT_INSTRUMENT_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: PAYMENT_INSTRUMENT_GENERIC_ERROR
                message: An error occurred in the microservice payment instrument
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  /wallet/code/generate:
    post:
      tags:
        - wallet
      summary: >-
        ENG: Generate idpay code, if initativeId is not present new code will be
        generated,- IT: Generato il codice per idpay, se l'initiativeId non è
        presente verrà generato un nuovo codice
      description: >-
        Generate idpay code, if initativeId is not present new code will be
        generated
      operationId: generateCode
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
      requestBody:
        description: 'ENG: Id of the iniziative - IT: Identificativo dell''iniziativa'
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenerateCodeReqDTO'
      responses:
        '200':
          description: Check successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenerateCodeRespDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: PAYMENT_INSTRUMENT_PIN_LENGTH_NOT_VALID
                message: Pin length is not valid
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: PAYMENT_INSTRUMENT_ENROLL_NOT_ALLOWED_FOR_REFUND_INITIATIVE
                message: >-
                  It is not possible to enroll a idpayCode for a refund type
                  initiative
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: PAYMENT_INSTRUMENT_USER_NOT_ONBOARDED
                message: The current user is not onboarded on initiative
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: PAYMENT_INSTRUMENT_TOO_MANY_REQUESTS
                message: Too many requests on the ms  Payment Instrument
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: PAYMENT_INSTRUMENT_GENERIC_ERROR
                message: An error occurred in the microservice wallet
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/wallet/{initiativeId}/code/instruments':
    put:
      tags:
        - wallet
      summary: >-
        ENG: Association of a payment instrument to an initiative - IT: Associa
        uno strumento di pagamento ad una iniziativa
      description: Association of a payment instrument to an initiative
      operationId: enrollInstrumentCode
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: Accept-Language
          description: 'ENG: Language - IT: Lingua'
          in: header
          schema:
            type: string
            pattern: '^[ -~]{2,5}$'
            minLength: 2
            maxLength: 5
            example: it-IT
            default: it-IT
          required: true
        - name: initiativeId
          in: path
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Enrollment OK
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INVALID_REQUEST
                message: Something went wrong handling the request
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_INSTRUMENT_IDPAYCODE_NOT_FOUND
                message: idpayCode is not found for the current user
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: WALLET_GENERIC_ERROR
                message: An error occurred in the microservice payment instrument
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/payment/qr-code/{trxCode}/relate-user':
    put:
      tags:
        - payment
      summary: 'ENG: Pre Authorize payment - IT: Preautorizzazione pagamento'
      description: Pre Authorize payment
      operationId: putPreAuthPayment
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: trxCode
          in: path
          description: 'ENG: The transaction''s code - IT: Codice della transazione'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthPaymentResponseDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_INVALID_REQUEST
                message: Required trxCode is not present
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Token not validated correctly
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_AUTH_ERROR
                message: Invalid token
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_USER_UNSUBSCRIBED
                message: The user has unsubscribed from initiative
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: Transaction does not exist or is expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_NOT_FOUND_OR_EXPIRED
                message: transaction not found or expired
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Generic error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_GENERIC_ERROR
                message: application error connection microservice error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/payment/qr-code/{trxCode}/authorize':
    put:
      tags:
        - payment
      summary: 'ENG: Authorize payment - IT: Autorizzazione pagamento'
      description: Authorize payment
      operationId: putAuthPayment
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: trxCode
          in: path
          description: 'ENG: The transaction''s code - IT: Codice della transazione'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthPaymentResponseDTO'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_INVALID_REQUEST
                message: Required trxCode is not present
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Token not validated correctly
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_AUTH_ERROR
                message: Invalid token
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_ALREADY_ASSIGNED
                message: transaction already assigned
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: Transaction does not exist or is expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_NOT_FOUND_OR_EXPIRED
                message: transaction not found or expired
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Generic error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_GENERIC_ERROR
                message: application error connection microservice error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  '/payment/qr-code/{trxCode}':
    delete:
      tags:
        - payment
      summary: 'ENG: Cancel payment - IT: Cancellazione pagamento'
      description: Cancel payment
      operationId: deletePayment
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
        - name: trxCode
          in: path
          description: 'ENG: The transaction''s code - IT: Codice della transazione'
          required: true
          schema:
            type: string
            maxLength: 24
            pattern: '^[a-zA-Z0-9]+$'
      responses:
        '200':
          description: Cancel Ok
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_UNRELATE_NOT_ALLOWED_FOR_TRX_STATUS
                message: unrelate transaction not allowed due to status
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Token not validated correctly
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_AUTH_ERROR
                message: Invalid token
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_ALREADY_ASSIGNED
                message: transaction already assigned
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: Transaction does not exist or is expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_NOT_FOUND_OR_EXPIRED
                message: transaction not found or expired
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Generic error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: PAYMENT_GENERIC_ERROR
                message: application error connection microservice error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
  /payment/bar-code:
    post:
      tags:
        - payment
      summary: 'ENG: Create a transaction ID - IT: Creazione della Transazione'
      description: Create a transaction
      operationId: createBarCodeTransaction
      parameters:
        - $ref: '#/components/parameters/ApiVersionHeader'
      requestBody:
        description: 'ENG: Id of the iniziative - IT: Identificativo dell''iniziativa'
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransactionBarCodeRequest'
            example:
              initiativeId: InitiativeId
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionBarCodeResponse'
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO1'
              example:
                code: PAYMENT_INVALID_REQUEST
                message: Required initiativeId is not present
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '401':
          description: Authentication failed
          content:
            application/json: {}
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '403':
          description: User not onboarded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO1'
              example:
                code: PAYMENT_USER_NOT_ONBOARDED
                message: User not onboarded
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '404':
          description: Transaction not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO1'
              example:
                code: PAYMENT_NOT_FOUND_OR_EXPIRED
                message: Cannot find transaction with trxCode trxCode
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO1'
              example:
                code: PAYMENT_TOO_MANY_REQUESTS
                message: Too many requests
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
        '500':
          description: Generic error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO1'
              example:
                code: PAYMENT_GENERIC_ERROR
                message: application error connection microservice error
          headers:
            Access-Control-Allow-Origin:
              $ref: '#/components/headers/Access-Control-Allow-Origin'
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/Retry-After'
components:
  schemas:
    IbanDTO:
      type: object
      required:
        - iban
        - checkIbanStatus
        - description
        - channel
      properties:
        iban:
          type: string
          description: 'ENG: IBAN of the citizen - IT: IBAN del cittadino'
        checkIbanStatus:
          type: string
          description: 'ENG: Status of checkIban - IT: Stato del checkIban'
          enum:
            - OK
            - KO
            - UNKNOWN_PSP
        holderBank:
          type: string
          description: 'ENG: Holder Bank name - IT: Nome della banca'
        description:
          type: string
          description: >-
            ENG: General description associated with the iban - IT: Descrizione
            generale associata alll'IBAN
        channel:
          type: string
          description: >-
            ENG: Channel from which the IBAN has been inserted - IT: Canale da
            cui l'IBAN è stato inserito
    IbanListDTO:
      type: object
      required:
        - ibanList
      properties:
        ibanList:
          type: array
          minItems: 0
          maxItems: 50
          items:
            $ref: '#/components/schemas/IbanDTO'
          description: >-
            ENG: The list of IBAN associated to a citizen - IT: Lista di IBAN
            associati ad un cittadino
    IbanErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - IBAN_NOT_FOUND
            - IBAN_INVALID_REQUEST
            - IBAN_TOO_MANY_REQUESTS
            - IBAN_GENERIC_ERROR
          description: |-
            'ENG: Error code: IBAN_NOT_FOUND: Iban not found,
             IBAN_INVALID_REQUEST: Something went wrong handling request,
             IBAN_TOO_MANY_REQUESTS: Too many requests,
             IBAN_GENERIC_ERROR: Application Error - IT: Codice di errore:
             IBAN_NOT_FOUND: Iban non trovato,
             IBAN_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,
             IBAN_TOO_MANY_REQUESTS: Troppe richieste,
             IBAN_GENERIC_ERROR: Errore generico'
        message:
          type: string
          description: 'ENG: Error message - IT: Messaggio di errore'
    SelfConsentDTO:
      oneOf:
        - $ref: '#/components/schemas/SelfConsentBoolDTO'
        - $ref: '#/components/schemas/SelfConsentMultiDTO'
        - $ref: '#/components/schemas/SelfConsentTextDTO'
        - $ref: '#/components/schemas/SelfConsentMultiTypeDTO'
    ListUsersOnboardingStatusDTO:
      title: ListUsersOnboardingStatusDTO
      type: array
      items:
        $ref: '#/components/schemas/UserOnboardingStatusDTO'
      description: >-
        ENG: List of initiatives in Waiting List or In Evaluation status, to
        which the user is onboarded - IT: Lista delle iniziative in stato Lista
        d'attesa o In Valutazione, a cui l'utente è onboardato
      maxItems: 10
    UserOnboardingStatusDTO:
      title: UserOnboardingStatusDTO
      type: object
      required:
        - initiativeName
        - serviceId
        - initiativeId
        - status
        - statusDate
      properties:
        initiativeName:
          type: string
          description: 'ENG: Name of the initiative - IT: Nome dell''iniziativa'
          example: Bonus Elettrodomestici
        serviceId:
          type: string
          description: 'ENG: The service ID - IT: Identificativo del service'
        initiativeId:
          type: string
          description: >-
            ENG: Unique identifier of the subscribed initiative - IT:
            Identificativo univoco dell'iniziativa sottoscritta
        status:
          enum:
            - ON_WAITING_LIST
            - ON_EVALUATION
          type: string
          description: >-
            ENG: Actual status of the citizen onboarding for an initiative - IT:
            Stato attuale del cittadino rispetto ad un'iniziativa
        statusDate:
          type: string
          format: date-time
          description: >-
            ENG: Date on which the status changed to the current one - IT: Data
            in cui lo stato è cambiato allo stato attuale
    OnboardingStatusDTO:
      title: OnboardingStatusDTO
      type: object
      required:
        - status
        - statusDate
      properties:
        status:
          enum:
            - ACCEPTED_TC
            - ON_EVALUATION
            - ONBOARDING_KO
            - ELIGIBLE_KO
            - ONBOARDING_OK
            - UNSUBSCRIBED
            - INVITED
            - DEMANDED
            - SUSPENDED
          type: string
          description: >-
            ENG: Actual status of the citizen onboarding for an initiative - IT:
            Stato attuale del cittadino rispetto ad un'iniziativa
        statusDate:
          type: string
          format: date-time
          description: >-
            ENG: Date on which the status changed to the current one - IT: Data
            in cui lo stato è cambiato allo stato attuale
        onboardingOkDate:
          type: string
          format: date-time
          description: >-
            ENG: Date on which the onboarding successfully went through - IT:
            Data in cui l'adesione è avvenuta con successo
    RowDataDTO:
      type: object
      required:
        - description
      properties:
        description:
          type: string
          example: descrizione
          description: >-
            ENG: Self-declaration description - IT: Descrizione del record di
            autodichiarazione
        subDescription:
          type: string
          example: sotto descrizione
          description: >-
            ENG: Self-declaration sub-description - IT: Sotto descrizione del
            record di autodichiarazione
    SelfConsentBoolDTO:
      type: object
      required:
        - _type
        - code
        - accepted
      properties:
        _type:
          type: string
          enum:
            - boolean
          description: 'ENG: Self-consent boolean type - IT: Auto consenso di tipo boolean'
        code:
          type: string
          description: 'ENG: Self-consent code - IT: Codice dell''auto consenso'
        accepted:
          type: boolean
          description: >-
            ENG: Indicates whether the self-consent is accepted or not - IT:
            Indica se l'auto consenso è accettato o no
    SelfConsentMultiDTO:
      type: object
      required:
        - _type
        - code
        - value
      properties:
        _type:
          type: string
          enum:
            - multi
          description: 'ENG: Self-consent value type - IT: Auto consenso di tipo multipli'
        code:
          type: string
          description: 'ENG: Self-consent code - IT: Codice dell''auto consenso'
        value:
          type: string
          example: '0, 1'
          description: >-
            ENG: Indicates self-consent values - IT: Indica i valori per gli
            auto consensi
    SelfConsentTextDTO:
      type: object
      required:
        - _type
        - code
        - value
      properties:
        _type:
          type: string
          enum:
            - text
          description: >-
            ENG: Self-consent value type free text - IT: Auto consenso di tipo
            testo libero
        code:
          type: string
          description: 'ENG: Self-consent code - IT: Codice dell''auto consenso'
        value:
          type: string
          description: >-
            ENG: Indicates self-consent values - IT: Indica i valori per gli
            auto consensi
    SelfConsentMultiTypeDTO:
      type: object
      required:
        - _type
        - code
        - value
      properties:
        _type:
          type: string
          enum:
            - multi_consent
          description: >-
            ENG: ISEE Self-consent value type - IT: Auto consenso di tipo
            multipli ISEE
        code:
          type: string
          enum:
            - isee
          description: 'ENG: Self-consent code - IT: Tipologia di multiconsenso'
        value:
          type: string
          example: '1, 2, 3'
          description: >-
            ENG: Indicates self-consent values - IT: Indica i valori per gli
            auto consensi
    InitiativeDataDTO:
      type: object
      required:
        - initiativeId
        - initiativeName
        - description
        - organizationId
        - organizationName
        - tcLink
        - privacyLink
      properties:
        initiativeId:
          type: string
          description: 'ENG: The initiative ID - IT: Identificativo dell''iniziativa'
        initiativeName:
          type: string
          description: 'ENG: Initiative''s name - IT: Nome dell''iniziativa'
          example: Bonus Elettrodomestici
        description:
          type: string
          example: Descrizione dell'iniziativa
          description: 'ENG: Initiative''s description - IT: Descrizione dell''iniziativa'
        organizationId:
          type: string
          description: >-
            ENG: Id of the organization that created the initiative - IT:
            Identificativo dell'organizzazione che ha creato l'iniziativa
        organizationName:
          type: string
          description: >-
            ENG: Name of the organization that created the initiative - IT: Nome
            dell'organizzazione che ha creato l'iniziativa
        tcLink:
          type: string
          description: >-
            ENG: URL that redirects to the terms and conditions - IT: URL che
            porta ai termini e condizioni
        privacyLink:
          type: string
          description: >-
            ENG: URL that redirects to the privacy policy - IT: URL che
            reindirizza all'informativa della privacy
        logoURL:
          type: string
          description: >-
            ENG: URL for the initiative's logo image - IT: URL del logo
            dell'iniziativa
        thumbnailUrl:
          type: string
          description: >-
            ENG: ToS Initiative Image URL - IT: URL dell'immagine
            dell'iniziativa per i ToS
    InitiativeErrorDTO:
      type: object
      properties:
        code:
          type: string
          enum:
            - INITIATIVE_INVALID_LOCALE_FORMAT
            - INITIATIVE_INVALID_REQUEST
            - INITIATIVE_NOT_FOUND
            - INITIATIVE_TOO_MANY_REQUESTS
            - INITIATIVE_GENERIC_ERROR
          description: |-
            'ENG: Error code:
             INITIATIVE_INVALID_LOCALE_FORMAT: Initiative not found due to invalid locale format,
             INITIATIVE_INVALID_REQUEST: Something went wrong handling the request,
             INITIATIVE_NOT_FOUND: Initiative not found,
             INITIATIVE_TOO_MANY_REQUESTS: Too many requests,
             INITIATIVE_GENERIC_ERROR: Application error,
             - IT: Codice di errore:
             INITIATIVE_INVALID_LOCALE_FORMAT: Iniziativa non trovata a causa di format locale non valido,
             INITIATIVE_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,
             INITIATIVE_NOT_FOUND: Iniziativa non trovata,
             INITIATIVE_TOO_MANY_REQUESTS: Troppe richieste,
             INITIATIVE_GENERIC_ERROR: Errore generico'
        message:
          type: string
          description: 'ENG: Error message - IT: Messaggio di errore'
    OnboardingErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - ONBOARDING_USER_UNSUBSCRIBED
            - ONBOARDING_PAGE_SIZE_NOT_ALLOWED
            - ONBOARDING_PDND_CONSENT_DENIED
            - ONBOARDING_SELF_DECLARATION_NOT_VALID
            - ONBOARDING_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS
            - ONBOARDING_READMISSION_NOT_ALLOWED_FOR_USER_STATUS
            - ONBOARDING_INVALID_REQUEST
            - ONBOARDING_USER_NOT_IN_WHITELIST
            - ONBOARDING_INITIATIVE_NOT_STARTED
            - ONBOARDING_INITIATIVE_ENDED
            - ONBOARDING_BUDGET_EXHAUSTED
            - ONBOARDING_INITIATIVE_STATUS_NOT_PUBLISHED
            - ONBOARDING_TECHNICAL_ERROR
            - ONBOARDING_UNSATISFIED_REQUIREMENTS
            - ONBOARDING_GENERIC_ERROR
            - ONBOARDING_USER_NOT_ONBOARDED
            - ONBOARDING_INITIATIVE_NOT_FOUND
            - ONBOARDING_TOO_MANY_REQUESTS
            - ONBOARDING_FAMILY_UNIT_ALREADY_JOINED
            - ONBOARDING_WAITING_LIST
          description: >-
            'ENG: Error code: ONBOARDING_USER_UNSUBSCRIBED: The user has
            unsubscribed from initiative, ONBOARDING_PAGE_SIZE_NOT_ALLOWED: Page
            size not allowed, ONBOARDING_PDND_CONSENT_DENIED: The PDND consent
            was denied by the user for the initiative,
            ONBOARDING_SELF_DECLARATION_NOT_VALID: The self-declaration criteria
            are not valid for the initiative or those inserted by the user do
            not match those required by the initiative,
            ONBOARDING_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS: It is not
            possible to suspend the user on initiative,
            ONBOARDING_READMISSION_NOT_ALLOWED_FOR_USER_STATUS: It is not
            possible to readmit the user on initiative,
            ONBOARDING_INVALID_REQUEST: Something went wrong handling the
            request, ONBOARDING_USER_NOT_IN_WHITELIST: The current user is not
            allowed to participate to the initiative,
            ONBOARDING_INITIATIVE_NOT_STARTED: The initiative has not yet begun,
            ONBOARDING_INITIATIVE_ENDED: The initiative ended,
            ONBOARDING_BUDGET_EXHAUSTED: Budget exhausted for initiative,
            ONBOARDING_INITIATIVE_STATUS_NOT_PUBLISHED: The initiative is not
            active, ONBOARDING_TECHNICAL_ERROR: A technical error occurred
            during the onboarding process, ONBOARDING_UNSATISFIED_REQUIREMENTS:
            The user does not satisfy the requirements set for the initiative,
            ONBOARDING_GENERIC_ERROR: Application error,
            ONBOARDING_USER_NOT_ONBOARDED: The current user is not onboarded on
            initiative, ONBOARDING_INITIATIVE_NOT_FOUND: Cannot find initiative,
            ONBOARDING_TOO_MANY_REQUESTS: Too many requests - IT: Codice di
            errore: ONBOARDING_USER_UNSUBSCRIBED: L'utente si è disiscritto
            dall'iniziativa, ONBOARDING_PAGE_SIZE_NOT_ALLOWED: Dimensione pagina
            non permessa, ONBOARDING_PDND_CONSENT_DENIED: Il consenso PDND per
            l'iniziativa è stato negato dall'utente,
            ONBOARDING_SELF_DECLARATION_NOT_VALID: I criteri di
            autodichiarazione non sono validi per l'iniziativa o quelli inseriti
            dall'utente non corrispondono con quelli richiesti dall'iniziativa,
            ONBOARDING_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS: Non è possibile
            sospendere l'utente dall'iniziativa,
            ONBOARDING_READMISSION_NOT_ALLOWED_FOR_USER_STATUS: Non è possibile
            riammettere l'utente all'iniziativa, ONBOARDING_INVALID_REQUEST:
            Qualcosa è andato storto durante l'invio della richiesta,
            ONBOARDING_USER_NOT_IN_WHITELIST: L'utente corrente non ha il
            permesso di partecipare all'iniziativa,
            ONBOARDING_INITIATIVE_NOT_STARTED: L'iniziativa non è ancora
            partita, ONBOARDING_INITIATIVE_ENDED: L'iniziativa è terminata,
            ONBOARDING_BUDGET_EXHAUSTED: Il budget dell'iniziativa è esaurito,
            ONBOARDING_INITIATIVE_STATUS_NOT_PUBLISHED: L'iniziativa non è
            attiva, ONBOARDING_TECHNICAL_ERROR: Si è verificato un errore
            tecnico durante il processo di adesione,
            ONBOARDING_UNSATISFIED_REQUIREMENTS: L'utente non soddisfa i
            requisiti che sono stati richiesti per l'iniziativa,
            ONBOARDING_GENERIC_ERROR: Errore applicativo,
            ONBOARDING_USER_NOT_ONBOARDED: Utente non onboardato all'iniziativa,
            ONBOARDING_INITIATIVE_NOT_FOUND: Iniziativa non trovata,
            ONBOARDING_TOO_MANY_REQUESTS: Troppe richieste'
        message:
          type: string
          description: 'ENG: Error message- IT: Messaggio di errore'
    OnboardingDTO:
      title: OnboardingWebDTO
      type: object
      required:
        - initiativeId
        - confirmedTos
        - pdndAccept
        - selfDeclarationList
      properties:
        initiativeId:
          type: string
          description: >-
            ENG: Unique identifier of the subscribed initiative - IT:
            Identificativo univoco dell'iniziativa sottoscritta
          maxLength: 24
          pattern: '^[a-zA-Z0-9]+$'
        confirmedTos:
          type: boolean
          description: >-
            'ENG: Indicates whether the user has correctly accepted the Terms
            and Conditions of the initiative - IT: Indica se l'utente ha
            correttamente accettato i Termini e Condizioni dell'iniziativa'
        pdndAccept:
          type: boolean
          description: >-
            'ENG: Indicates whether the user has correctly accepted the PDND
            Criteria of the initiative - IT: Indica se l'utente ha correttamente
            accettato i PDND Criteria dell'iniziativa'
        selfDeclarationList:
          type: array
          items:
            $ref: '#/components/schemas/SelfConsentDTO'
          description: >-
            ENG: The list of accepted self-declared criteria - IT: Lista dei
            criteri autodichiarati
          maxItems: 10
        userMail:
          type: string
          description: >-
            ENG: Contact email provided by the user during web onboarding - IT:
            Mail di contatto fornita dall'utente in fase di onboarding web
          maxLength: 24
          example: utente@email.it
          pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        userMailConfirmation:
          type: string
          description: >-
            ENG: Confirm email provided by the user during web onboarding - IT:
            Mail di conferma fornita dall'utente in fase di onboarding web
          maxLength: 24
          example: utente@email.it
          pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    InitiativeDTO:
      type: object
      properties:
        general:
          $ref: '#/components/schemas/InitiativeGeneralDTO'
        beneficiaryRule:
          $ref: '#/components/schemas/InitiativeBeneficiaryRuleDTO'
    InitiativeGeneralDTO:
      type: object
      properties:
        budget:
          type: number
          example: 10
        beneficiaryType:
          enum:
            - PF
            - PG
            - NF
          type: string
        familyUnitComposition:
          enum:
            - INPS
            - ANPR
          type: string
        beneficiaryKnown:
          type: boolean
        beneficiaryBudget:
          type: number
          example: 10
        startDate:
          type: string
          description: Start date
          format: date
          example: '2022-01-30'
        endDate:
          type: string
          description: Start date
          format: date
          example: '2022-01-30'
        rankingStartDate:
          type: string
          description: Start date
          format: date
          example: '2022-01-30'
        rankingEndDate:
          type: string
          description: Start date
          format: date
          example: '2022-01-30'
        rankingEnabled:
          type: boolean
        termAndCondition:
          type: string
          example: termAndCondition
          description: 'ENG: Term and Condition - IT: Termini e Condizioni'
    InitiativeBeneficiaryRuleDTO:
      type: object
      properties:
        selfDeclarationCriteria:
          type: array
          maxItems: 10
          items:
            $ref: >-
              #/components/schemas/AnyOfInitiativeBeneficiaryRuleDTOSelfDeclarationCriteriaItems
        automatedCriteria:
          type: array
          maxItems: 10
          items:
            $ref: '#/components/schemas/AutomatedCriteriaDTO'
    AnyOfInitiativeBeneficiaryRuleDTOSelfDeclarationCriteriaItems:
      type: object
      anyOf:
        - $ref: '#/components/schemas/SelfCriteriaBoolDTO'
        - $ref: '#/components/schemas/SelfCriteriaMultiDTO'
        - $ref: '#/components/schemas/SelfCriteriaMultiTypeDTO'
        - $ref: '#/components/schemas/SelfCriteriaTextDTO'
    SelfCriteriaBoolDTO:
      type: object
      properties:
        _type:
          type: string
          description: >-
            ENG: Self-declaration boolean type - IT: Autodichiarazione di tipo
            boolean
          enum:
            - boolean
        description:
          type: string
          example: descrizione
          description: >-
            ENG: Self-declaration description - IT: Descrizione
            dell'autodichiarazione
        subDescription:
          type: string
          example: sotto descrizione
          description: >-
            ENG: Self-declaration sub-description - IT: Sotto descrizione
            dell'autodichiarazione
        value:
          type: boolean
          description: >-
            ENG: Indicates whether the self-declaration is accepted or not - IT:
            Indica se l'autodichiarazione è accettata o no
        code:
          type: string
          description: 'ENG: Self-declaration code - IT: Codice dell''autodichiarazione'
    SelfCriteriaMultiDTO:
      title: SelfCriteriaMultiDTO
      type: object
      properties:
        _type:
          type: string
          description: >-
            ENG: Self-declaration value type - IT: Autodichiarazione di tipo
            multipli
          enum:
            - multi
        description:
          type: string
          example: descrizione
          description: >-
            ENG: Self-declaration description - IT: Descrizione
            dell'autodichiarazione
        subDescription:
          type: string
          example: sotto descrizione
          description: >-
            ENG: Self-declaration sub-description - IT: Sotto descrizione
            dell'autodichiarazione
        value:
          type: array
          items:
            $ref: '#/components/schemas/RowDataDTO'
          description: >-
            ENG: Indicates self-declaration values - IT: Indica i valori per
            l'autodichiarazione
          maxItems: 10
        code:
          type: string
          description: 'ENG: Self-declaration code - IT: Codice dell''autodichiarazione'
    SelfCriteriaMultiTypeDTO:
      title: SelfCriteriaMultiDTO
      type: object
      properties:
        _type:
          type: string
          description: >-
            ENG: Self-declaration value type - IT: Autodichiarazione di tipo
            multipli
          enum:
            - multi_consent
        description:
          type: string
          example: descrizione
          description: >-
            ENG: Self-declaration description - IT: Descrizione
            dell'autodichiarazione
        subDescription:
          type: string
          example: sotto descrizione
          description: >-
            ENG: Self-declaration sub-description - IT: Sotto descrizione
            dell'autodichiarazione
        value:
          type: array
          items:
            $ref: '#/components/schemas/RowDataDTO'
          description: >-
            ENG: Indicates self-declaration values - IT: Indica i valori per
            l'autodichiarazione
          maxItems: 10
        code:
          type: string
          description: 'ENG: Self-declaration code - IT: Codice dell''autodichiarazione'
          enum:
            - isee
    SelfCriteriaTextDTO:
      title: SelfCriteriaTextDTO
      type: object
      properties:
        _type:
          type: string
          description: >-
            ENG: Self-declaration value type free text - IT: Autodichiarazione
            di tipo testo libero
          enum:
            - text
        description:
          type: string
          example: descrizione
          description: >-
            ENG: Self-declaration description - IT: Descrizione
            dell'autodichiarazione
        subDescription:
          type: string
          example: sotto descrizione
          description: >-
            ENG: Self-declaration sub-description - IT: Sotto descrizione
            dell'autodichiarazione
        value:
          type: string
          example: '0, 1'
          description: >-
            ENG: Indicates self-declaration values - IT: Indica i valori per
            l'autodichiarazione
        code:
          type: string
          description: 'ENG: Self-declaration code - IT: Codice dell''autodichiarazione'
    AutomatedCriteriaDTO:
      type: object
      properties:
        authority:
          type: string
          description: 'ENG: The information agency - IT: L''ente che ti da l''informazione'
          example: authority
        code:
          type: string
          enum:
            - ISEE
            - RESIDENCE
            - BIRTHDAY
            - FAMILY_UNIT
          description: 'ENG: Criteria code - IT: Codice del criterio'
        field:
          type: string
          description: 'ENG:  - IT: '
          example: field
        operator:
          type: string
          description: 'ENG:  - IT: '
          example: operator
        value:
          type: string
          description: 'ENG:  - IT: '
          example: value
        value2:
          type: string
          description: 'ENG:  - IT: '
          example: value2
    OperationDTO:
      oneOf:
        - $ref: '#/components/schemas/TransactionDetailDTO'
        - $ref: '#/components/schemas/InstrumentOperationDTO'
        - $ref: '#/components/schemas/IbanOperationDTO'
        - $ref: '#/components/schemas/OnboardingOperationDTO'
        - $ref: '#/components/schemas/RefundDetailDTO'
        - $ref: '#/components/schemas/SuspendOperationDTO'
        - $ref: '#/components/schemas/ReadmittedOperationDTO'
        - $ref: '#/components/schemas/UnsubscribeOperationDTO'
    TimelineDTO:
      type: object
      required:
        - lastUpdate
        - operationList
        - pageNo
        - pageSize
        - totalElements
        - totalPages
      properties:
        lastUpdate:
          type: string
          description: 'ENG: Date of the last update - IT: Data dell''ultimo aggiornamento'
          format: date-time
        operationList:
          type: array
          minItems: 1
          maxItems: 10
          items:
            $ref: '#/components/schemas/OperationListDTO'
          description: >-
            ENG: The list of transactions and operations of an initiative of a
            citizen - IT: La lista di transazioni e operazioni di una iniziativa
            di un cittadino
        pageNo:
          type: integer
          format: int32
          minimum: 1
          maximum: 200
          description: 'ENG: Number of pages - IT: Numero di pagine'
        pageSize:
          type: integer
          format: int32
          minimum: 1
          maximum: 50
          description: >-
            ENG: Number of elements in the page - IT: Numero di elementi
            all'interno della pagina
        totalElements:
          type: integer
          format: int32
          minimum: 1
          maximum: 10
          description: 'ENG: Number of total elements - IT: Numero totali di elementi'
        totalPages:
          type: integer
          format: int32
          minimum: 1
          maximum: 200
          description: 'ENG: Number of total pages - IT: Numero totali di pagine'
    OperationListDTO:
      description: Complex type for items in the operation list
      oneOf:
        - $ref: '#/components/schemas/TransactionOperationDTO'
        - $ref: '#/components/schemas/InstrumentOperationDTO'
        - $ref: '#/components/schemas/RejectedInstrumentOperationDTO'
        - $ref: '#/components/schemas/IbanOperationDTO'
        - $ref: '#/components/schemas/OnboardingOperationDTO'
        - $ref: '#/components/schemas/RefundOperationDTO'
        - $ref: '#/components/schemas/SuspendOperationDTO'
        - $ref: '#/components/schemas/ReadmittedOperationDTO'
        - $ref: '#/components/schemas/UnsubscribeOperationDTO'
    RejectedInstrumentOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
        - channel
      properties:
        operationId:
          type: string
          description: 'ENG: Id of operation - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - REJECTED_ADD_INSTRUMENT
            - REJECTED_DELETE_INSTRUMENT
          description: >-
            ENG: Operation type [REJECTED_ADD_INSTRUMENT: Rejected add
            instrument, REJECTED_DELETE_INSTRUMENT: Rejected delete instrument]
            - IT: Tipologia di operazione [REJECTED_ADD_INSTRUMENT: Respinto
            l'inserimento dello strumento, REJECTED_DELETE_INSTRUMENT: Respinta
            la cancellazione dello strumento]
          example: REJECTED_ADD_INSTRUMENT
          type: string
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
        brandLogo:
          type: string
          format: uri
          description: >-
            ENG: Card's brand logo URL - IT: URL del logo del marchio della
            carta
        brand:
          type: string
          description: >-
            ENG: Card's brand as mastercard, visa, ecc. - IT: Marchio della
            carta come mastercard, visa, ecc...
        instrumentId:
          type: string
          description: 'ENG: Id instrument - IT: Identificativo dello strumento'
        maskedPan:
          type: string
          example: 1234-****-****-5678
          description: 'ENG: masked PAN - IT: masked PAN'
        channel:
          type: string
          enum:
            - RTD
            - QRCODE
            - IDPAYCODE
            - BARCODE
          example: BARCODE
          description: >-
            ENG: Channel from which the operation takes place - IT: Canale da
            cui avviene l'operazione
        instrumentType:
          type: string
          enum:
            - CARD
            - IDPAYCODE
          example: CARD
          description: 'ENG: Instrument type - IT: Tipologia di strumento'
    TransactionDetailDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
        - accruedCents
        - status
      properties:
        operationId:
          type: string
          description: 'ENG: Id of the operation - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - TRANSACTION
            - REVERSAL
          example: REVERSAL
          type: string
          description: 'ENG: Operation type - IT: Tipologia di operazione'
        eventId:
          type: string
        brandLogo:
          type: string
          format: uri
          description: >-
            ENG: Card's brand logo URL - IT: URL del logo del marchio della
            carta
        brand:
          type: string
          description: >-
            ENG: Card's brand as mastercard, visa, ecc. - IT: Marchio della
            carta come mastercard, visa, ecc...
        maskedPan:
          type: string
          example: 1234-****-****-5678
          description: 'ENG: Masked Pan - IT: Masked Pan'
        amountCents:
          type: integer
          format: int64
          description: 'ENG: Transaction amount - IT: Importo della transazione'
        accruedCents:
          type: integer
          format: int64
          description: 'ENG: Transaction accrued - IT: Importo accumulato'
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
        circuitType:
          type: string
          example: '00'
          description: >-
            ENG: Circuit type - IT: Tipologia del circuito 00-> Bancomat,
            01->Visa, 02->Mastercard, 03->Amex, 04->JCB, 05->UnionPay,
            06->Diners, 07->PostePay, 08->BancomatPay, 09->Satispay,
            10->PrivateCircuit
        idTrxIssuer:
          type: string
          description: >-
            ENG: Transaction issuer ID - IT: Identificativo della transazione
            rispetto all'issuer
        idTrxAcquirer:
          type: string
          description: >-
            ENG: Transaction acquirer ID- IT: Identificativo della transazione
            rispetto all'acquirer
        status:
          type: string
          enum:
            - AUTHORIZED
            - REWARDED
            - CANCELLED
          example: CANCELLED
          description: >-
            ENG: Transaction status [AUTHORIZED: Transaction authorize,
            REWARDED: Transaction rewarded, CANCELLED: Transaction cancelled]  -
            IT: Stato della transazione [AUTHORIZED: Transazione autorizzata,
            REWARDED: Transazione premiata, CANCELLED: transazione cancellata]
        channel:
          type: string
          enum:
            - RTD
            - QRCODE
            - IDPAYCODE
            - BARCODE
          example: BARCODE
          description: >-
            ENG: Channel from which the transaction takes place - IT: Canale da
            cui avviene la transazione
        businessName:
          type: string
    InstrumentOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
        - instrumentType
        - channel
      properties:
        operationId:
          type: string
          description: 'ENG: Operation ID - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - ADD_INSTRUMENT
            - DELETE_INSTRUMENT
          type: string
          description: 'ENG: Operation type - IT: Tipologia di operazione'
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
        brandLogo:
          type: string
          format: uri
          description: >-
            ENG: Card's brand logo URL - IT: URL del logo del marchio della
            carta
        brand:
          type: string
          description: >-
            ENG: Card's brand as mastercard, visa, ecc. - IT: Marchio della
            carta come mastercard, visa, ecc...
        maskedPan:
          type: string
          example: 1234-****-****-5678
          description: 'ENG: Masked Pan - IT: Masked Pan'
        channel:
          type: string
          enum:
            - RTD
            - QRCODE
            - IDPAYCODE
            - BARCODE
          example: BARCODE
          description: >-
            ENG: Channel from which the operation takes place - IT: Canale da
            cui avviene l'operazione
        instrumentType:
          type: string
          enum:
            - CARD
            - IDPAYCODE
    IbanOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
        - iban
        - channel
      properties:
        operationId:
          type: string
          description: 'ENG: Operation ID - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - ADD_IBAN
          type: string
          description: 'ENG: Operation type - IT: Tipologia dell''operazione'
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
        iban:
          type: string
          description: 'ENG: IBAN of the citizen - IT: IBAN del cittadino'
        channel:
          type: string
          enum:
            - RTD
            - QRCODE
            - IDPAYCODE
            - BARCODE
          example: BARCODE
          description: >-
            ENG: Channel from which the operation takes place - IT: Canale da
            cui avviene l'operazione
    OnboardingOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
      properties:
        operationId:
          type: string
          description: 'ENG: Operation ID - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - ONBOARDING
          type: string
          description: 'ENG: Operaztion type - IT: Tipologia dell''operazione'
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
    RefundOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - eventId
        - operationDate
        - amountCents
      properties:
        operationId:
          type: string
          description: 'ENG: Operation ID - IT: Identificativo dell''operazione'
        eventId:
          type: string
          description: 'ENG: Event ID - IT: Identificativo dell''evento'
        operationType:
          enum:
            - PAID_REFUND
            - REJECTED_REFUND
          type: string
          description: >-
            ENG: Operation type [PAID_REFUND: Paid refund, REJECTED_REFUND:
            Rejected refund] - IT: Tipologia dell'operazione [PAID_REFUND:
            Rimborso pagato, REJECTED_REFUND: Rimborso rifiutato]
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
        amountCents:
          type: integer
          format: int64
          description: 'ENG: Refund amount - IT: Importo da rimborsare'
    TransactionOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
        - accruedCents
        - status
      properties:
        operationId:
          type: string
          description: 'ENG: Id of the operation - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - TRANSACTION
            - REVERSAL
          type: string
          description: 'ENG: Operation type - IT: Tipologia dell''operazione'
        eventId:
          type: string
          description: 'ENG: Event ID - IT: Identificativo dell''evento'
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
        brandLogo:
          type: string
          format: uri
          description: >-
            ENG: Card's brand logo URL - IT: URL del logo del marchio della
            carta
        brand:
          type: string
          description: >-
            ENG: Card's brand as mastercard, visa, ecc. - IT: Marchio della
            carta come mastercard, visa, ecc...
        maskedPan:
          type: string
          example: 1234-****-****-5678
          description: 'ENG: Masked PAN - IT: Masked PAN'
        amountCents:
          type: integer
          format: int64
          description: 'ENG: Transaction amount - IT: Importo della transazione'
        accruedCents:
          type: integer
          format: int64
          description: 'ENG: Accrued amount - IT: Importo accumulato'
        circuitType:
          type: string
          example: '00'
          description: >-
            ENG: Circuit type - IT: Tipologia di circuito 00-> Bancomat,
            01->Visa, 02->Mastercard, 03->Amex, 04->JCB, 05->UnionPay,
            06->Diners, 07->PostePay, 08->BancomatPay, 09->Satispay,
            10->PrivateCircuit
        status:
          type: string
          enum:
            - AUTHORIZED
            - REWARDED
            - CANCELLED
          example: CANCELLED
          description: 'ENG: Transaction status  - IT: Stato della transazione'
        channel:
          type: string
          enum:
            - RTD
            - QRCODE
            - IDPAYCODE
            - BARCODE
          example: BARCODE
          description: >-
            ENG: Channel from which the transaction takes place - IT: Canale da
            cui avviene la transazione
        businessName:
          type: string
    SuspendOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
      properties:
        operationId:
          type: string
          description: 'ENG: Operation ID - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - SUSPENDED
          example: SUSPENDED
          type: string
          description: >-
            ENG: Operation type [SUSPENDED: Suspended] - IT: Tipologia
            dell'operazione [SUSPENDED: sospeso]
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
    RefundDetailDTO:
      type: object
      required:
        - operationId
        - operationType
        - eventId
        - operationDate
        - amountCents
      properties:
        operationId:
          type: string
          description: 'ENG: Operation ID - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - PAID_REFUND
            - REJECTED_REFUND
          type: string
          example: REJECTED_REFUND
          description: >-
            ENG: Operation type [PAID_REFUND: Paid refund, REJECTED_REFUND:
            Rejected refund] - IT: Tipologia dell'operazione [PAID_REFUND:
            Rimborso pagato, REJECTED_REFUND: Rimborso rifiutato]
        eventId:
          type: string
          description: 'ENG: Event ID - IT: Identificativo dell''evento'
        iban:
          type: string
          description: 'ENG: IBAN - IT: IBAN'
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
        amountCents:
          type: integer
          format: int64
          description: 'ENG: Refund amount - IT: Importo da rimborsare'
        status:
          type: string
          description: 'ENG: Refund status - IT: Stato del rimborso'
        refundType:
          type: string
          description: 'ENG: Refund type - IT: Tipologia di rimborso'
        startDate:
          type: string
          format: date
          description: 'ENG: Start date - IT: Data di inizio'
        endDate:
          type: string
          format: date
          description: 'ENG: End date - IT Data di fine'
        transferDate:
          type: string
          format: date
          description: 'ENG: Transfer date - IT: Data della trasferenza'
        userNotificationDate:
          type: string
          format: date
          description: 'ENG: User notification date - IT: Data di notificazione all''utente'
        cro:
          type: string
          description: >-
            ENG: Code that identifies a bank transaction/credit transfer - IT:
            Codice che identifica una transazione bancaria/bonifico
    ReadmittedOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
      properties:
        operationId:
          type: string
          description: 'ENG: Id of the operation - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - READMITTED
          example: READMITTED
          type: string
          description: 'ENG: Operation type - IT: Tipologia dell''operazione'
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
    TimelineErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - TIMELINE_DETAIL_NOT_FOUND
            - TIMELINE_USER_NOT_FOUND
            - TIMELINE_REFUNDS_NOT_FOUND
            - TIMELINE_INVALID_REQUEST
            - TIMELINE_TOO_MANY_REQUESTS
            - TIMELINE_GENERIC_ERROR
          description: >-
            'ENG: Error code: TIMELINE_DETAIL_NOT_FOUND: Detail of Timeline not
            found,
             TIMELINE_USER_NOT_FOUND: Timeline for the current user not found,
             TIMELINE_REFUNDS_NOT_FOUND: Refund for current initiative not found,
             TIMELINE_INVALID_REQUEST: Something went wrong handling request,
             TIMELINE_TOO_MANY_REQUESTS: Too many requests,
             TIMELINE_GENERIC_ERROR: Application Error - IT: Codice di errore:
             TIMELINE_DETAIL_NOT_FOUND: Dettaglio della Timeline non trovato,
             TIMELINE_USER_NOT_FOUND: Timeline per utente corrente non trovata,
             TIMELINE_REFUNDS_NOT_FOUND:  Rimborso per la corrente iniziativa non trovato,
             TIMELINE_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,
             TIMELINE_TOO_MANY_REQUESTS: Troppe richieste,
             TIMELINE_GENERIC_ERROR: Errore generico'
          example: TIMELINE_DETAIL_NOT_FOUND
        message:
          type: string
          description: 'ENG: Error message - IT: Messaggio di errore'
    UnsubscribeOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
      properties:
        operationId:
          type: string
          description: 'ENG: Id of the operation - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - UNSUBSCRIBED
          example: UNSUBSCRIBED
          type: string
          description: 'ENG: Operation type - IT: Tipologia dell''operazione'
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
    CheckEnrollmentDTO:
      type: object
      properties:
        isIdPayCodeEnabled:
          type: boolean
    GenerateCodeReqDTO:
      title: GenerateCodeDTO
      type: object
      properties:
        initiativeId:
          type: string
          description: >-
            ENG: Unique identifier of the subscribed initiative - IT:
            Identificativo univoco dell'iniziativa sottoscritta
          maxLength: 24
          pattern: '^[a-zA-Z0-9]+$'
    GenerateCodeRespDTO:
      type: object
      properties:
        idpayCode:
          type: string
          description: 'ENG: Numeric code - IT: codice numerico'
    IbanPutDTO:
      title: IbanPutDTO
      type: object
      required:
        - iban
        - description
      properties:
        iban:
          type: string
          description: 'ENG: IBAN of the citizen - IT: IBAN del cittadino'
          pattern: '^IT[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}$'
          minLength: 27
          maxLength: 27
        description:
          type: string
          description: >-
            ENG: Further information about the iban - IT: Ulteriori informazioni
            sull'iban
          pattern: '^[a-zA-Z0-9_]+$'
          maxLength: 255
    WalletStatusDTO:
      title: WalletStatusDTO
      type: object
      required:
        - status
      properties:
        status:
          enum:
            - NOT_REFUNDABLE_ONLY_IBAN
            - NOT_REFUNDABLE_ONLY_INSTRUMENT
            - REFUNDABLE
            - NOT_REFUNDABLE
            - UNSUBSCRIBED
            - SUSPENDED
          type: string
          description: >-
            ENG: Actual status of the citizen wallet for an initiative - IT:
            Stato attuale del portafoglio di un cittadino per un'iniziativa
        voucherStatus:
          enum:
            - USED
            - EXPIRED
            - ACTIVE
            - EXPIRING
          type: string
          description: 'ENG: Actual status of the voucher - IT: Stato attuale del voucher'
    WalletDTO:
      type: object
      required:
        - initiativeList
      properties:
        initiativeList:
          type: array
          maxItems: 100
          items:
            $ref: '#/components/schemas/InitiativeDTO1'
          description: >-
            ENG: The list of active initiatives of a citizen - IT: Lista delle
            iniziative attive di un cittadino
    InstrumentListDTO:
      type: object
      required:
        - instrumentList
      properties:
        instrumentList:
          type: array
          maxItems: 20
          items:
            $ref: '#/components/schemas/InstrumentDTO'
          description: >-
            'ENG: The list of payment instruments associated to the initiative
            by the citizen - IT: Lista degli strumenti di pagamenti di un
            cittadino associati ad una iniziativa'
    InstrumentDTO:
      title: InstrumentDTO
      type: object
      required:
        - instrumentId
        - instrumentType
      properties:
        idWallet:
          type: string
          description: >-
            ENG: Wallet's id provided by the Payment manager - IT:
            Identificativo del portafoglio fornito dal gestore di pagamenti
        instrumentId:
          type: string
          description: >-
            ENG: Payment instrument id - IT: Identificativo dello strumento di
            pagamento
        maskedPan:
          type: string
          description: 'ENG: Masked Pan - IT: Masked Pan'
          example: 1234 **** **** 5678
        channel:
          type: string
          description: 'ENG: Channel - IT: Canale di richiesta'
        brandLogo:
          type: string
          example: 'https://cstarpayment/logo.png'
          description: >-
            ENG: Card's brand logo URL - IT: URL del logo del marchio della
            carta
        brand:
          type: string
          example: 'https://cstarpayment/cardBrand'
          description: >-
            ENG: Card's brand as mastercard, visa, ecc. - IT: Marchio della
            carta come mastercard, visa, ecc...
        status:
          enum:
            - ACTIVE
            - PENDING_ENROLLMENT_REQUEST
            - PENDING_DEACTIVATION_REQUEST
          type: string
          description: 'ENG: The status of the instrument - IT: Stato dello strumento'
        instrumentType:
          type: string
          enum:
            - CARD
            - APP_IO_PAYMENT
            - IDPAYCODE
        activationDate:
          type: string
          format: date-time
          description: >-
            ENG: Activation date of the instrument - IT: Data di attivazione
            dello strumento
    InitiativeDTO1:
      type: object
      required:
        - initiativeId
        - status
        - initiativeEndDate
        - nInstr
      properties:
        familyId:
          type: string
          description: 'ENG: Id of the family unit - IT: Identificativo del nucleo familiare'
        initiativeId:
          type: string
          description: 'ENG: Id initiative - IT: Identificativo dell''iniziativa'
        initiativeName:
          type: string
          description: 'ENG: Name of the initiative - IT: Nome dell''iniziativa'
          example: Bonus Elettrodomestici
        status:
          enum:
            - NOT_REFUNDABLE_ONLY_IBAN
            - NOT_REFUNDABLE_ONLY_INSTRUMENT
            - REFUNDABLE
            - NOT_REFUNDABLE
            - UNSUBSCRIBED
            - SUSPENDED
          type: string
          description: 'ENG: The status of the Wallet - IT: Stato attuale del Wallet'
        voucherStatus:
          enum:
            - USED
            - EXPIRED
            - ACTIVE
            - EXPIRING
          type: string
          description: 'ENG: Actual status of the voucher - IT: Stato attuale del voucher'
        initiativeEndDate:
          type: string
          format: date
          description: >-
            ENG: End date for the time window in which it is possible to use the
            initiative's rewards - IT: Data che indica la fine del periodo di
            fruizione dell'iniziativa
        voucherStartDate:
          type: string
          format: date
          description: >-
            ENG: START date for the time window in which it is possible to use
            the voucher's rewards - IT: Data che indica l'inizio del periodo di
            fruizione del voucher
        voucherEndDate:
          type: string
          format: date
          description: >-
            ENG: End date for the time window in which it is possible to use the
            voucher's rewards - IT: Data che indica la fine del periodo di
            fruizione del voucher
        amountCents:
          type: integer
          format: int64
          description: 'ENG: Initiative total amount - IT: Importo totale dell''iniziativa'
        accruedCents:
          type: integer
          format: int64
          description: >-
            ENG: Initiative accrued amount IT: Importo accumulato
            dell'iniziativa
        refundedCents:
          type: integer
          format: int64
          description: >-
            ENG: Refunded amount of the initiative - IT: Importo rimborsato
            dell'iniziativa
        lastCounterUpdate:
          type: string
          format: date-time
          description: >-
            ENG: Date of the last update of the counters - IT: Data dell'ultimo
            aggiornamento dei contatori
        iban:
          type: string
          description: 'ENG: IBAN - IT: IBAN'
        nInstr:
          type: integer
          format: int32
          description: 'ENG: Number of instruments - IT: Numero di strumenti'
        initiativeRewardType:
          enum:
            - DISCOUNT
            - REFUND
            - EXPENSE
          type: string
          description: >-
            ENG: Reward type of the initiative - IT: Tipologia di premio
            dell'iniziativa
        logoURL:
          type: string
          description: 'ENG: Url of the logo - IT: Url del logo'
        organizationName:
          type: string
          description: 'ENG: Organization name - IT: Nome dell''organizzazione'
        nTrx:
          type: integer
          format: int64
          description: 'ENG:Number of transaction - IT: Numero di transazione'
        webViewUrl:
          type: string
          description: 'ENG: webViewUrl - IT: Url della webView'
        serviceId:
          type: string
          description: 'ENG: The service ID - IT: Identificativo del service'
    InitiativesWithInstrumentDTO:
      type: object
      required:
        - idWallet
        - maskedPan
        - brand
        - initiativeList
      properties:
        idWallet:
          type: string
          description: 'ENG: Id of the wallet - IT: Identificativo del portafoglio'
        maskedPan:
          type: string
          description: 'ENG: Masked Pan - IT: Masked Pan'
          example: 1234 **** **** 5678
        brand:
          type: string
          example: 'https://cstarpayment/cardBrand'
          description: >-
            ENG: Card's brand as mastercard, visa, ecc. - IT: Marchio della
            carta come mastercard, visa, ecc...
        initiativeList:
          type: array
          maxItems: 100
          items:
            $ref: '#/components/schemas/InitiativesStatusDTO'
          description: >-
            ENG: The list of the initiatives status related to a payment
            instrument - IT: Lista degli stati delle iniziative associate ad un
            instrumento di pagamento
    InitiativesStatusDTO:
      type: object
      required:
        - initiativeId
        - initiativeName
        - status
      properties:
        initiativeId:
          type: string
          description: 'ENG: Initiative ID - IT: Identificativo dell''iniziativa'
        initiativeName:
          type: string
          description: 'ENG: Name of the initiative - IT: Nome dell''iniziativa'
          example: Bonus Elettrodomestici
        idInstrument:
          type: string
          description: 'ENG: Instrument ID - IT: Identificativo dello strumento'
        status:
          type: string
          enum:
            - ACTIVE
            - INACTIVE
            - PENDING_ENROLLMENT_REQUEST
            - PENDING_DEACTIVATION_REQUEST
          description: >-
            ENG: Status of the initiative [ACTIVE: Active, INACTIVE: Inactive,
            PENDING_ENROLLMENT_REQUEST: Richiesta di adesione in attesa,
            PENDING_DEACTIVATION_REQUEST: Pending deactivation request] - IT:
            Stato dell'iniziativa [ACTIVE: Iniziativa attiva, INACTIVE:
            Iniziativa inactive, PENDING_ENROLLMENT_REQUEST: Pending enrollment
            request, PENDING_DEACTIVATION_REQUEST: Richiesta di disattivazione
            in attesa]
    InitiativeDetailDTO:
      type: object
      required:
        - initiativeId
      properties:
        initiativeName:
          type: string
          description: 'ENG: Name of the initiative - IT: Nome dell''iniziativa'
          example: Bonus Elettrodomestici
        initiativeId:
          type: string
        status:
          type: string
          description: 'ENG: Status of the initiative - IT: Stato dell''iniziativa'
          enum:
            - PUBLISHED
            - APPROVED
            - IN_REVISION
            - TO_CHECK
            - SUSPENDED
            - DRAFT
            - CLOSED
        description:
          type: string
          description: 'ENG: Description of the initiative - IT: Descrizione dell''iniziativa'
        ruleDescription:
          type: string
          description: 'ENG: Description of the rules - IT: Descrizione delle regole'
        onboardingStartDate:
          type: string
          format: date
          description: >-
            ENG: Start date for the initiative's onboarding time window - IT:
            Data di inizio della finestra temporale in cui si può aderire
            all'iniziativa
        onboardingEndDate:
          type: string
          format: date
          description: >-
            ENG: End date for the initiative's onboarding time window - IT: Data
            di fine della finestra temporale in cui si può aderire
            all'iniziativa
        fruitionStartDate:
          type: string
          format: date
          description: >-
            ENG: Start date of the time window in which it is possible to use
            the initiative's rewards - IT: Data di inizio della finestra
            temporale in cui si usufruire dei premi dell'iniziativa
        fruitionEndDate:
          type: string
          format: date
          description: >-
            ENG: End date of the time window in which it is possible to use the
            initiative's rewards - IT: Data di fine della finestra temporale in
            cui si usufruire dei premi dell'iniziativa
        rewardRule:
          $ref: '#/components/schemas/RewardValueDTO'
        refundRule:
          $ref: '#/components/schemas/InitiativeRefundRuleDTO'
        privacyLink:
          type: string
          description: >-
            ENG: URL that redirects to the privacy policy - IT: URL che
            reindirizza all informativa della privacy
        tcLink:
          type: string
          description: >-
            ENG: URL that redirects to the terms and conditions - IT: URL che
            porta ai termini e condizioni
        logoURL:
          type: string
          description: 'ENG: Url of the logo - IT: Url del logo'
        updateDate:
          type: string
          format: date-time
          description: 'ENG: Update date - IT: Data di aggiornamento dell''iniziativa'
        serviceId:
          type: string
          description: 'ENG: The service ID - IT: Identificativo del service'
    InitiativeRefundRuleDTO:
      type: object
      properties:
        accumulatedAmount:
          $ref: '#/components/schemas/AccumulatedAmountDTO'
        timeParameter:
          $ref: '#/components/schemas/TimeParameterDTO'
    AccumulatedAmountDTO:
      required:
        - accumulatedType
      type: object
      properties:
        accumulatedType:
          type: string
          enum:
            - BUDGET_EXHAUSTED
            - THRESHOLD_REACHED
          description: >-
            ENG: Accumulated type [BUDGET_EXHAUSTED: budget exhausted,
            THRESHOLD_REACHED: threshold reached] - IT: Tipologia di
            accumulazione [BUDGET_EXHAUSTED: Budget esaurito, THRESHOLD_REACHED:
            Soglia raggiunta]
        refundThreshold:
          type: number
          description: 'ENG: Refund threshold - IT: Soglia di rimborso'
    TimeParameterDTO:
      required:
        - timeType
      type: object
      properties:
        timeType:
          type: string
          enum:
            - CLOSED
            - DAILY
            - WEEKLY
            - MONTHLY
            - QUARTERLY
          description: >-
            ENG: Time type [CLOSED: At the end of the initiative, DAILY: Daily,
            WEEKLY: Weekly, MONTHLY: Monthly, QUARTERLY: Quarterly] - IT:
            Tipologia di tesmpistiche di rimborso [CLOSED: Alla chiusura
            dell'iniziativa, DAILY: Giornaliero, WEEKLY: Settimanale, MONTHLY:
            Mensile, QUARTERLY: Trimestrale]
    RewardValueDTO:
      required:
        - rewardValueType
        - rewardValue
      type: object
      properties:
        rewardValueType:
          type: string
          enum:
            - PERCENTAGE
            - ABSOLUTE
          description: >-
            ENG: Reward value type [PERCENTAGE: Percentage, ABSOLUTE: Absolute]-
            IT: Tipologia di premio [PERCENTAGE: Percentuale, ABSOLUTE:
            Assoluto]
        rewardValue:
          type: number
          description: 'ENG: Reward value - IT: Valore di reward'
    WalletErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - WALLET_USER_UNSUBSCRIBED
            - WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE
            - WALLET_ENROLL_IBAN_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE
            - WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_REFUND_INITIATIVE
            - WALLET_INITIATIVE_ENDED
            - WALLET_USER_NOT_ONBOARDED
            - WALLET_IBAN_NOT_ITALIAN
            - WALLET_INSTRUMENT_ALREADY_ASSOCIATED
            - WALLET_INSTRUMENT_DELETE_NOT_ALLOWED
            - WALLET_INSTRUMENT_IDPAYCODE_NOT_FOUND
            - WALLET_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS
            - WALLET_READMISSION_NOT_ALLOWED_FOR_USER_STATUS
            - WALLET_INSTRUMENT_NOT_FOUND
            - WALLET_GENERIC_ERROR
            - WALLET_INVALID_REQUEST
            - WALLET_TOO_MANY_REQUESTS
          description: >-
            'ENG: Error code: WALLET_USER_UNSUBSCRIBED: The user has
            unsubscribed from initiative,
            WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE: It is
            not possible to enroll a payment instrument for a discount
            initiative, WALLET_ENROLL_IBAN_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE:
            It is not possible enroll an iban for a discount type initiative,
            WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_REFUND_INITIATIVE: It is
            not possible to enroll a IDPayCode for a refund type initiative,
            WALLET_INITIATIVE_ENDED: The operation is not allowed because the
            initiative has already ended, WALLET_USER_NOT_ONBOARDED: User not
            onboarded on this initiative, WALLET_IBAN_NOT_ITALIAN: Iban is not
            italian, WALLET_INSTRUMENT_ALREADY_ASSOCIATED: Payment Instrument is
            already associated to another user,
            WALLET_INSTRUMENT_DELETE_NOT_ALLOWED: It's not possible to delete an
            instrument of AppIO payment types,
            WALLET_INSTRUMENT_IDPAYCODE_NOT_FOUND: idpayCode is not found for
            the current user, WALLET_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS: It
            is not possible to suspend the user on initiative,
            WALLET_READMISSION_NOT_ALLOWED_FOR_USER_STATUS: It is not possible
            to readmit the user on initiative, WALLET_INSTRUMENT_NOT_FOUND: The
            selected payment instrument has not been found for the current user,
            WALLET_GENERIC_ERROR: Application error, WALLET_INVALID_REQUEST:
            Something went wrong handling the request, WALLET_TOO_MANY_REQUESTS:
            Too many requests on the ms - IT: Codice di errore:
            WALLET_USER_UNSUBSCRIBED: L'utente si è disiscritto dall'iniziativa,
            WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE: Non è
            possibile associare uno strumento di pagamento per un'iniziativa di
            tipo a sconto,
            WALLET_ENROLL_IBAN_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE: Non è
            possibile associare un iban per un'iniziativa di tipo a sconto,
            WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_REFUND_INITIATIVE: Non è
            possibile associare un IDPayCode per una iniziativa di tipo a
            rimborso, WALLET_INITIATIVE_ENDED: L'operazione non è consentita
            perché l'iniziativa è scaduta, WALLET_USER_NOT_ONBOARDED: Utente non
            onboardato all'inziativa, WALLET_IBAN_NOT_ITALIAN: L'Iban non è
            italiano, WALLET_INSTRUMENT_ALREADY_ASSOCIATED: Lo strumento di
            pagamento è già associato ad un altro utente,
            WALLET_INSTRUMENT_DELETE_NOT_ALLOWED: Non è possibile eliminare uno
            strumento di tipo AppIO, WALLET_INSTRUMENT_IDPAYCODE_NOT_FOUND:
            L'idpayCode non è stato trovato per l'utente corrente,
            WALLET_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS: Non è possibile
            sospendere l'utente dall'iniziativa,
            WALLET_READMISSION_NOT_ALLOWED_FOR_USER_STATUS: Non è possibile
            riammettere l'utente all'iniziativa, WALLET_INSTRUMENT_NOT_FOUND: Lo
            strumento di pagamento selezionato non è stato trovato per l'utente
            corrente, WALLET_GENERIC_ERROR: Errore generico,
            WALLET_INVALID_REQUEST: Qualcosa è andato storto durante l'invio
            della richiesta, WALLET_TOO_MANY_REQUESTS: Troppe richieste'
        message:
          type: string
          description: 'ENG: Error message- IT: Messaggio di errore'
    PaymentInstrumentErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - PAYMENT_INSTRUMENT_PIN_LENGTH_NOT_VALID
            - PAYMENT_INSTRUMENT_INVALID_REQUEST
            - PAYMENT_INSTRUMENT_ALREADY_ASSOCIATED
            - PAYMENT_INSTRUMENT_DELETE_NOT_ALLOWED
            - PAYMENT_INSTRUMENT_ENCRYPTION_ERROR
            - PAYMENT_INSTRUMENT_DECRYPTION_ERROR
            - PAYMENT_INSTRUMENT_ENROLL_NOT_ALLOWED_FOR_REFUND_INITIATIVE
            - PAYMENT_INSTRUMENT_INITIATIVE_ENDED
            - PAYMENT_INSTRUMENT_USER_UNSUBSCRIBED
            - PAYMENT_INSTRUMENT_NOT_FOUND
            - PAYMENT_INSTRUMENT_IDPAYCODE_NOT_FOUND
            - PAYMENT_INSTRUMENT_USER_NOT_ONBOARDED
            - PAYMENT_INSTRUMENT_TOO_MANY_REQUESTS
            - PAYMENT_INSTRUMENT_GENERIC_ERROR
          description: >-
            'ENG: Error code: PAYMENT_INSTRUMENT_PIN_LENGTH_NOT_VALID: Pin
            length is not valid, PAYMENT_INSTRUMENT_INVALID_REQUEST: Something
            went wrong handling the request,
            PAYMENT_INSTRUMENT_ALREADY_ASSOCIATED: Payment Instrument is already
            associated to another user, PAYMENT_INSTRUMENT_DELETE_NOT_ALLOWED:
            It's not possible to delete an instrument of AppIO payment types,
            PAYMENT_INSTRUMENT_ENCRYPTION_ERROR: Something went wrong creating
            SHA256 digest, PAYMENT_INSTRUMENT_DECRYPTION_ERROR: Something gone
            wrong while extracting datablock from pinblock,
            PAYMENT_INSTRUMENT_ENROLL_NOT_ALLOWED_FOR_REFUND_INITIATIVE: It is
            not possible to enroll a idpayCode for a refund type initiative,
            PAYMENT_INSTRUMENT_INITIATIVE_ENDED: The operation is not allowed
            because the initiative has already ended,
            PAYMENT_INSTRUMENT_USER_UNSUBSCRIBED: The user has unsubscribed from
            initiative, PAYMENT_INSTRUMENT_NOT_FOUND: The selected payment
            instrument has not been found for the current user,
            PAYMENT_INSTRUMENT_IDPAYCODE_NOT_FOUND: idpayCode is not found for
            the current user, PAYMENT_INSTRUMENT_USER_NOT_ONBOARDED: The current
            user is not onboarded on initiative,
            PAYMENT_INSTRUMENT_TOO_MANY_REQUESTS: Too many requests,
            PAYMENT_INSTRUMENT_GENERIC_ERROR Application error: - IT: Codice di
            errore: PAYMENT_INSTRUMENT_PIN_LENGTH_NOT_VALID: Lunghezza del pin
            non valida, PAYMENT_INSTRUMENT_INVALID_REQUEST: Qualcosa è andato
            storto durante l'invio della richiesta,
            PAYMENT_INSTRUMENT_ALREADY_ASSOCIATED: Lo strumento di pagamento è
            già associato ad un altro utente,
            PAYMENT_INSTRUMENT_DELETE_NOT_ALLOWED: Non è possibile eliminare uno
            strumento di pagamento di tipo AppIO,
            PAYMENT_INSTRUMENT_ENCRYPTION_ERROR: Qualcosa è andato storto
            durante la creazione del digest SHA256,
            PAYMENT_INSTRUMENT_DECRYPTION_ERROR: Qualcosa è andato storto
            durante l'estrazione del datablock dal pinblock,
            PAYMENT_INSTRUMENT_ENROLL_NOT_ALLOWED_FOR_REFUND_INITIATIVE: Non è
            possibile enrollare un idpayCode per un'iniziativa di tipo a
            rimborso, PAYMENT_INSTRUMENT_INITIATIVE_ENDED: L'operazione non è
            consentita perché l'iniziativa è scaduta,
            PAYMENT_INSTRUMENT_USER_UNSUBSCRIBED: L'utente si è disiscritto
            dall'iniziativa, PAYMENT_INSTRUMENT_NOT_FOUND:  Lo strumento di
            pagamento selezionato non è stato trovato per l'utente corrente,
            PAYMENT_INSTRUMENT_IDPAYCODE_NOT_FOUND: L'idpayCode non è stato
            trovato per l'utente corrente,
            PAYMENT_INSTRUMENT_USER_NOT_ONBOARDED: L'utente corrente non è
            onboardato all'iniziativa, PAYMENT_INSTRUMENT_TOO_MANY_REQUESTS:
            Troppe richieste, PAYMENT_INSTRUMENT_GENERIC_ERROR: Errore generico'
        message:
          type: string
          description: 'ENG: Error message- IT: Messaggio di errore'
    AuthPaymentResponseDTO:
      type: object
      required:
        - id
        - trxCode
        - initiativeId
        - status
        - amountCents
      properties:
        id:
          type: string
          maxLength: 64
          pattern: '^[a-zA-Z0-9_-]+$'
          description: 'ENG: Id of the payment - IT: Identificativo del pagamento'
        trxCode:
          type: string
          maxLength: 24
          pattern: '^[a-zA-Z0-9]+$'
          description: 'ENG: Transaction code - IT: Codice della transazione'
        trxDate:
          type: string
          format: date-time
          description: 'ENG: Transaction date - IT: Data della transazione'
        initiativeId:
          type: string
          maxLength: 24
          pattern: '^[a-zA-Z0-9]+$'
          description: 'ENG: Id of the initiative - IT: Identificativo dell''iniziativa'
        initiativeName:
          type: string
          description: 'ENG: Name of the initiative - IT: Nome della iniziativa'
          example: Bonus Elettrodomestici
        businessName:
          type: string
          description: 'ENG: Business name - IT: Nome dell''esercente'
        status:
          type: string
          enum:
            - CREATED
            - IDENTIFIED
            - AUTHORIZATION_REQUESTED
            - AUTHORIZED
          description: >-
            ENG: Status of the payment [CREATED: Created, IDENTIFIED: User
            related, AUTHORIZATION_REQUESTED: Authorization Requested,
            AUTHORIZED: authorized] - IT: Stato del pagamento [CREATED: Creato,
            IDENTIFIED: Utente associato, AUTHORIZATION_REQUESTED:
            autorizzazione richiesta, AUTHORIZED: autorizzato]
        rewardCents:
          type: integer
          format: int64
          minimum: 0
          maximum: 1000000000
          description: 'ENG: Reward - IT: Premio generato'
        amountCents:
          type: integer
          format: int64
          minimum: 0
          maximum: 1000000000
          description: 'ENG: Amount cents - IT: Importo in centessimi'
        residualBudgetCents:
          type: integer
          format: int64
          minimum: 0
          maximum: 1000000000
          description: 'ENG: Residual budget - IT: Budget residuo'
    TransactionErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - PAYMENT_NOT_FOUND_OR_EXPIRED
            - PAYMENT_TRANSACTION_EXPIRED
            - PAYMENT_INITIATIVE_NOT_FOUND
            - PAYMENT_INITIATIVE_INVALID_DATE
            - PAYMENT_INITIATIVE_NOT_DISCOUNT
            - PAYMENT_ALREADY_AUTHORIZED
            - PAYMENT_ALREADY_CANCELLED
            - PAYMENT_BUDGET_EXHAUSTED
            - PAYMENT_GENERIC_REJECTED
            - PAYMENT_TOO_MANY_REQUESTS
            - PAYMENT_GENERIC_ERROR
            - PAYMENT_USER_SUSPENDED
            - PAYMENT_USER_NOT_ONBOARDED
            - PAYMENT_USER_UNSUBSCRIBED
            - PAYMENT_ALREADY_ASSIGNED
            - PAYMENT_NOT_ALLOWED_FOR_TRX_STATUS
            - PAYMENT_NOT_ALLOWED_MISMATCHED_MERCHANT
            - PAYMENT_USER_NOT_ASSOCIATED
            - PAYMENT_DELETE_NOT_ALLOWED_FOR_TRX_STATUS
            - PAYMENT_UNRELATE_NOT_ALLOWED_FOR_TRX_STATUS
            - PAYMENT_AMOUNT_NOT_VALID
            - PAYMENT_MERCHANT_NOT_ONBOARDED
            - PAYMENT_INVALID_REQUEST
            - PAYMENT_TRANSACTION_VERSION_PENDING
            - PAYMENT_AUTH_ERROR
          description: >-
            'ENG: Error code: PAYMENT_NOT_FOUND_OR_EXPIRED: transaction not
            found or expired, PAYMENT_TRANSACTION_EXPIRED: transaction expired,
            PAYMENT_INITIATIVE_NOT_FOUND: initiative not found,
            PAYMENT_INITIATIVE_INVALID_DATE: initiative invalid date,
            PAYMENT_INITIATIVE_NOT_DISCOUNT: initiative is not of discount type,
            PAYMENT_ALREADY_AUTHORIZED: transaction already authorized,
            PAYMENT_ALREADY_CANCELLED: transaction already cancelled,
            PAYMENT_BUDGET_EXHAUSTED: budget exhausted,
            PAYMENT_GENERIC_REJECTED: generic rejected error (transaction
            rejected), PAYMENT_TOO_MANY_REQUESTS: too many request, retry,
            PAYMENT_GENERIC_ERROR: application error (connection microservice
            error), PAYMENT_USER_SUSPENDED: the user has been suspended on the
            initiative, PAYMENT_USER_NOT_ONBOARDED: user not onboarded,
            PAYMENT_USER_UNSUBSCRIBED: user unsubscribed,
            PAYMENT_ALREADY_ASSIGNED:  transaction already assigned,
            PAYMENT_NOT_ALLOWED_FOR_TRX_STATUS: operation on transaction not
            allowed due to status, PAYMENT_NOT_ALLOWED_MISMATCHED_MERCHANT:
            operation on transaction not allowed due to merchant mismatched,
            PAYMENT_USER_NOT_ASSOCIATED: user not associated to the transaction,
            PAYMENT_DELETE_NOT_ALLOWED_FOR_TRX_STATUS: cancellation of
            transaction not allowed due to status,
            PAYMENT_UNRELATE_NOT_ALLOWED_FOR_TRX_STATUS: unrelate transaction
            not allowed due to status, PAYMENT_AMOUNT_NOT_VALID: amount of
            transaction not valid, PAYMENT_MERCHANT_NOT_ONBOARDED: the merchant
            is not onboarded, PAYMENT_INVALID_REQUEST: request validation error,
            PAYMENT_TRANSACTION_VERSION_PENDING: The transaction version is
            actually locked, - IT: Codice di errore:
            PAYMENT_NOT_FOUND_OR_EXPIRED: transazione non trovata oppure
            scaduta, PAYMENT_TRANSACTION_EXPIRED: transazione scaduta,
            PAYMENT_INITIATIVE_NOT_FOUND: iniziativa non trovata,
            PAYMENT_INITIATIVE_INVALID_DATE: iniziativa con data invalida,
            PAYMENT_INITIATIVE_NOT_DISCOUNT: iniziativa non è di tipo a sconto,
            PAYMENT_ALREADY_AUTHORIZED: transazione già autorizzata,
            PAYMENT_ALREADY_CANCELLED: transazione già cancellata,
            PAYMENT_BUDGET_EXHAUSTED: budget esaurito, PAYMENT_GENERIC_REJECTED:
            errore generico, transazione rigettata, PAYMENT_TOO_MANY_REQUESTS:
            troppe richieste, riprovare, PAYMENT_GENERIC_ERROR: errore generico
            (errore nella connessione ad un microservizio),
            PAYMENT_USER_SUSPENDED: l'utente è stato sospeso dall'iniziativa,
            PAYMENT_USER_NOT_ONBOARDED: utente non onboardato all'iniziativa,
            PAYMENT_USER_UNSUBSCRIBED: utente disiscritto dall'iniziativa,
            PAYMENT_ALREADY_ASSIGNED:  transazione già assegnata,
            PAYMENT_NOT_ALLOWED_FOR_TRX_STATUS: transazione non consentita a
            causa dello stato della transazione,
            PAYMENT_NOT_ALLOWED_MISMATCHED_MERCHANT: transazione non consentita
            a causa della mancata corrispondenza del merchant,
            PAYMENT_USER_NOT_ASSOCIATED: utente non associato alla transazione,
            PAYMENT_DELETE_NOT_ALLOWED_FOR_TRX_STATUS: annullamento della
            transazione non consentito a causa dello stato della transazione,
            PAYMENT_UNRELATE_NOT_ALLOWED_FOR_TRX_STATUS: disassociazione non
            consentita a causa dello stato della transazione,
            PAYMENT_AMOUNT_NOT_VALID: importo nella transazione non valido,
            PAYMENT_MERCHANT_NOT_ONBOARDED: il merchant non è onboardato,
            PAYMENT_INVALID_REQUEST: errore di validazione della richiesta,
            PAYMENT_TRANSACTION_VERSION_PENDING: La versione del contatore è
            attualmente bloccata'
        message:
          type: string
          maxLength: 2500
          pattern: '^[a-zA-Z0-9 _@\-.!?]+'
          description: 'ENG: Error message- IT: Messaggio di errore'
    TransactionErrorDTO1:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - PAYMENT_NOT_FOUND_OR_EXPIRED
            - PAYMENT_TRANSACTION_EXPIRED
            - PAYMENT_INITIATIVE_NOT_FOUND
            - PAYMENT_INITIATIVE_INVALID_DATE
            - PAYMENT_INITIATIVE_NOT_DISCOUNT
            - PAYMENT_ALREADY_AUTHORIZED
            - PAYMENT_ALREADY_CANCELLED
            - PAYMENT_BUDGET_EXHAUSTED
            - PAYMENT_GENERIC_REJECTED
            - PAYMENT_TOO_MANY_REQUESTS
            - PAYMENT_GENERIC_ERROR
            - PAYMENT_USER_SUSPENDED
            - PAYMENT_USER_NOT_ONBOARDED
            - PAYMENT_USER_UNSUBSCRIBED
            - PAYMENT_ALREADY_ASSIGNED
            - PAYMENT_NOT_ALLOWED_FOR_TRX_STATUS
            - PAYMENT_NOT_ALLOWED_MISMATCHED_MERCHANT
            - PAYMENT_USER_NOT_ASSOCIATED
            - PAYMENT_DELETE_NOT_ALLOWED_FOR_TRX_STATUS
            - PAYMENT_UNRELATE_NOT_ALLOWED_FOR_TRX_STATUS
            - PAYMENT_AMOUNT_NOT_VALID
            - PAYMENT_MERCHANT_NOT_ONBOARDED
            - PAYMENT_INVALID_REQUEST
            - PAYMENT_TRANSACTION_VERSION_PENDING
          description: >-
            'ENG: Error code: PAYMENT_NOT_FOUND_OR_EXPIRED: transaction not
            found or expired, PAYMENT_TRANSACTION_EXPIRED: transaction expired,
            PAYMENT_INITIATIVE_NOT_FOUND: initiative not found,
            PAYMENT_INITIATIVE_INVALID_DATE: initiative invalid date,
            PAYMENT_INITIATIVE_NOT_DISCOUNT: initiative is not of discount type,
            PAYMENT_ALREADY_AUTHORIZED: transaction already authorized,
            PAYMENT_ALREADY_CANCELLED: transaction already cancelled,
            PAYMENT_BUDGET_EXHAUSTED: budget exhausted,
            PAYMENT_GENERIC_REJECTED: generic rejected error (transaction
            rejected), PAYMENT_TOO_MANY_REQUESTS: too many request, retry,
            PAYMENT_GENERIC_ERROR: application error (connection microservice
            error), PAYMENT_USER_SUSPENDED: the user has been suspended on the
            initiative, PAYMENT_USER_NOT_ONBOARDED: user not onboarded,
            PAYMENT_USER_UNSUBSCRIBED: user unsubscribed,
            PAYMENT_ALREADY_ASSIGNED:  transaction already assigned,
            PAYMENT_NOT_ALLOWED_FOR_TRX_STATUS: operation on transaction not
            allowed due to status, PAYMENT_NOT_ALLOWED_MISMATCHED_MERCHANT:
            operation on transaction not allowed due to merchant mismatched,
            PAYMENT_USER_NOT_ASSOCIATED: user not associated to the transaction,
            PAYMENT_DELETE_NOT_ALLOWED_FOR_TRX_STATUS: cancellation of
            transaction not allowed due to status,
            PAYMENT_UNRELATE_NOT_ALLOWED_FOR_TRX_STATUS: unrelate transaction
            not allowed due to status, PAYMENT_AMOUNT_NOT_VALID: amount of
            transaction not valid, PAYMENT_MERCHANT_NOT_ONBOARDED: the merchant
            is not onboarded, PAYMENT_INVALID_REQUEST: request validation error,
            PAYMENT_TRANSACTION_VERSION_PENDING: The transaction version is
            actually locked, - IT: Codice di errore:
            PAYMENT_NOT_FOUND_OR_EXPIRED: transazione non trovata oppure
            scaduta, PAYMENT_TRANSACTION_EXPIRED: transazione scaduta,
            PAYMENT_INITIATIVE_NOT_FOUND: iniziativa non trovata,
            PAYMENT_INITIATIVE_INVALID_DATE: iniziativa con data invalida,
            PAYMENT_INITIATIVE_NOT_DISCOUNT: iniziativa non è di tipo a sconto,
            PAYMENT_ALREADY_AUTHORIZED: transazione già autorizzata,
            PAYMENT_ALREADY_CANCELLED: transazione già cancellata,
            PAYMENT_BUDGET_EXHAUSTED: budget esaurito, PAYMENT_GENERIC_REJECTED:
            errore generico, transazione rigettata, PAYMENT_TOO_MANY_REQUESTS:
            troppe richieste, riprovare, PAYMENT_GENERIC_ERROR: errore generico
            (errore nella connessione ad un microservizio),
            PAYMENT_USER_SUSPENDED: l'utente è stato sospeso dall'iniziativa,
            PAYMENT_USER_NOT_ONBOARDED: utente non onboardato all'iniziativa,
            PAYMENT_USER_UNSUBSCRIBED: utente disiscritto dall'iniziativa,
            PAYMENT_ALREADY_ASSIGNED:  transazione già assegnata,
            PAYMENT_NOT_ALLOWED_FOR_TRX_STATUS: transazione non consentita a
            causa dello stato della transazione,
            PAYMENT_NOT_ALLOWED_MISMATCHED_MERCHANT: transazione non consentita
            a causa della mancata corrispondenza del merchant,
            PAYMENT_USER_NOT_ASSOCIATED: utente non associato alla transazione,
            PAYMENT_DELETE_NOT_ALLOWED_FOR_TRX_STATUS: annullamento della
            transazione non consentito a causa dello stato della transazione,
            PAYMENT_UNRELATE_NOT_ALLOWED_FOR_TRX_STATUS: disassociazione non
            consentita a causa dello stato della transazione,
            PAYMENT_AMOUNT_NOT_VALID: importo nella transazione non valido,
            PAYMENT_MERCHANT_NOT_ONBOARDED: il merchant non è onboardato,
            PAYMENT_INVALID_REQUEST: errore di validazione della richiesta,
            PAYMENT_TRANSACTION_VERSION_PENDING: La versione del contatore è
            attualmente bloccata'
        message:
          type: string
          maxLength: 2500
          pattern: '^[a-zA-Z0-9 _@\-.!?]+'
          description: 'ENG: Error message- IT: Messaggio di errore'
    TransactionBarCodeRequest:
      type: object
      required:
        - initiativeId
      properties:
        initiativeId:
          type: string
          maxLength: 24
          pattern: '^[a-zA-Z0-9]+$'
          description: 'ENG: Initiative ID - IT: Identificativo dell''iniziativa'
    TransactionBarCodeResponse:
      type: object
      required:
        - id
        - trxCode
        - initiativeId
        - initiativeName
        - trxDate
        - trxExpirationSeconds
        - residualBudgetCents
        - status
      properties:
        id:
          type: string
          maxLength: 24
          pattern: '^[a-zA-Z0-9]+$'
          description: 'ENG: Id of the payment - IT: Identificativo del pagamento'
        trxCode:
          type: string
          pattern: '^[ -~]{1,255}$'
          maxLength: 255
          description: 'ENG: Transaction code - IT: Codice della transazione'
        initiativeId:
          type: string
          maxLength: 24
          pattern: '^[a-zA-Z0-9]+$'
          description: 'ENG: Id of the initiative - IT: Identificativo dell''iniziativa'
        initiativeName:
          type: string
          pattern: '^[ -~]{1,255}$'
          maxLength: 255
          example: Bonus Elettrodomestici
          description: 'ENG: Name of the initiative - IT: Nome dell''iniziativa'
        trxDate:
          type: string
          format: date-time
          description: 'ENG: Transaction date - IT: Data della transazione'
        trxExpirationSeconds:
          type: number
          description: >-
            ENG: Expiration time of the transaction, in seconds - IT: Scadenza
            della transazione, in secondi
        residualBudgetCents:
          type: integer
          format: int64
          minimum: 1
          maximum: 999999999999999
          description: 'ENG: Residual budget in cents - IT: Budget residuo in centesimi'
        status:
          type: string
          enum:
            - CREATED
          description: >-
            ENG: Status of the payment [CREATED: Created] - IT: Stato del
            pagamento [CREATED: Creato]
  parameters:
    ApiVersionHeader:
      name: X-Api-Version
      in: header
      description: 'ENG: Api Version - IT: Versione dell Api'
      required: true
      schema:
        type: string
        enum:
          - v1
        example: v1
        default: v1
  headers:
    Access-Control-Allow-Origin:
      description: >-
        Indicates whether the response can be shared with requesting code from
        the given origin
      schema:
        type: string
        pattern: '^[ -~]{1,2048}$'
        minLength: 1
        maxLength: 2048
    RateLimit-Limit:
      description: The number of allowed requests in the current period
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 240
    RateLimit-Reset:
      description: The number of seconds left in the current period
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 60
    Retry-After:
      description: The number of seconds to wait before allowing a follow-up request
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 240
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
